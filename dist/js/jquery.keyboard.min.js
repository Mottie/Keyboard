/*! jQuery UI Virtual Keyboard v1.26.23 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t=e.keyboard=function(a,i){var s,n=this;n.version="1.26.23",n.$el=e(a),n.el=a,n.$el.data("keyboard",n),n.init=function(){n.initialized=!1;var a,r,o,l=t.css,c=t.events;n.settings=i||{},i&&i.position&&(r=e.extend({},i.position),i.position=null),n.options=s=e.extend(!0,{},t.defaultOptions,i),r&&(s.position=r,i.position=r),n.el.active=!0,n.namespace=".keyboard"+Math.random().toString(16).slice(2),n.extensionNamespace=[],n.shiftActive=n.altActive=n.metaActive=n.sets=n.capsLock=!1,n.rows=["","-shift","-alt","-alt-shift"],n.inPlaceholder=n.$el.attr("placeholder")||"",n.watermark=t.watermark&&""!==n.inPlaceholder,n.repeatTime=1e3/(s.repeatRate||20),s.preventDoubleEventTime=s.preventDoubleEventTime||100,n.isOpen=!1,n.wheel=e.isFunction(e.fn.mousewheel),n.escapeRegex=/[-\/\\^$*+?.()|[\]{}]/g,a=t.keyCodes,n.alwaysAllowed=[a.capsLock,a.pageUp,a.pageDown,a.end,a.home,a.left,a.up,a.right,a.down,a.insert,a.delete],n.$keyboard=[],n.enabled=!0,n.checkCaret=s.lockInput||t.checkCaretSupport(),n.last={start:0,end:0,key:"",val:"",preVal:"",layout:"",virtual:!0,keyset:[!1,!1,!1],wheel_$Keys:null,wheelIndex:0,wheelLayers:[]},n.temp=["",0,0],e.each([c.kbInit,c.kbBeforeVisible,c.kbVisible,c.kbHidden,c.inputCanceled,c.inputAccepted,c.kbBeforeClose,c.inputRestricted],function(t,a){e.isFunction(s[a])&&n.$el.bind(a+n.namespace+"callbacks",s[a])}),s.alwaysOpen&&(s.stayOpen=!0),o=e(document),n.el.ownerDocument!==document&&(o=o.add(n.el.ownerDocument));var d="keyup checkkeyboard mousedown touchstart ";s.closeByClickEvent&&(d+="click "),o.bind(d.split(" ").join(n.namespace+" "),function(e){clearTimeout(n.timer3),n.timer3=setTimeout(function(){n.checkClose(e)},1)}),n.$el.addClass(l.input+" "+s.css.input).attr({"aria-haspopup":"true",role:"textbox"}),(s.lockInput||n.el.readOnly)&&(s.lockInput=!0,n.$el.addClass(l.locked).attr({readonly:"readonly"})),(n.$el.is(":disabled")||n.$el.attr("readonly")&&!n.$el.hasClass(l.locked))&&n.$el.addClass(l.noKeyboard),s.openOn&&n.bindFocus(),n.watermark||""!==n.$el.val()||""===n.inPlaceholder||""===n.$el.attr("placeholder")||n.$el.addClass(l.placeholder).val(n.inPlaceholder),n.$el.trigger(c.kbInit,[n,n.el]),s.alwaysOpen&&n.reveal(),n.initialized=!0},n.toggle=function(){if(n.hasKeyboard()){var e=n.$keyboard.find("."+t.css.keyToggle),a=!n.enabled;return n.$preview.prop("readonly",a||n.options.lockInput),n.$keyboard.toggleClass(t.css.keyDisabled,a).find("."+t.css.keyButton).not(e).prop("disabled",a).attr("aria-disabled",a),e.toggleClass(t.css.keyDisabled,a),a&&n.typing_options&&(n.typing_options.text=""),n}},n.setCurrent=function(){var a=t.css,i=e("."+a.isCurrent),s=i.data("keyboard");e.isEmptyObject(s)||s.el===n.el||s.close(!!s.options.autoAccept&&"true"),i.removeClass(a.isCurrent),e("."+a.hasFocus).removeClass(a.hasFocus),n.$el.addClass(a.isCurrent),n.$keyboard.addClass(a.hasFocus),n.isCurrent(!0),n.isOpen=!0},n.isCurrent=function(e){var a=t.currentKeyboard||!1;return e?a=t.currentKeyboard=n.el:!1===e&&a===n.el&&(a=t.currentKeyboard=""),a===n.el},n.hasKeyboard=function(){return n.$keyboard&&n.$keyboard.length>0},n.isVisible=function(){return!!n.hasKeyboard()&&n.$keyboard.is(":visible")},n.focusOn=function(){!n&&n.el.active||(n.isVisible()?n.setCurrent():(clearTimeout(n.timer),n.reveal()))},n.redraw=function(e){return e&&(n.options.layout=e),n.$keyboard.length&&(n.last.preVal=""+n.last.val,n.last.val=n.$preview&&n.$preview.val()||n.$el.val(),n.$el.val(n.last.val),n.removeKeyboard(),n.shiftActive=n.altActive=n.metaActive=!1),n.isOpen=s.alwaysOpen,n.reveal(!0),n},n.reveal=function(a){var i=n.isOpen,r=t.css;if(n.opening=!i,e("."+r.keyboard).not("."+r.alwaysOpen).each(function(){var t=e(this).data("keyboard");e.isEmptyObject(t)||t.close(!!t.options.autoAccept&&"true")}),!(n.$el.is(":disabled")||n.$el.attr("readonly")&&!n.$el.hasClass(r.locked)))return n.$el.removeClass(r.noKeyboard),s.openOn&&n.$el.unbind(e.trim((s.openOn+" ").split(/\s+/).join(n.namespace+" "))),n.$keyboard&&(!n.$keyboard||n.$keyboard.length&&!e.contains(document.body,n.$keyboard[0]))||n.startup(),n.watermark||n.el.value!==n.inPlaceholder||n.$el.removeClass(r.placeholder).val(""),n.originalContent=n.$el.val(),n.$preview.val(n.originalContent),s.acceptValid&&n.checkValid(),s.resetDefault&&(n.shiftActive=n.altActive=n.metaActive=!1),n.showSet(),n.isVisible()||n.$el.trigger(t.events.kbBeforeVisible,[n,n.el]),(n.initialized||s.initialFocus||!s.initialFocus&&n.$el.hasClass(t.css.initialFocus))&&n.setCurrent(),n.toggle(),n.$keyboard.show(),s.usePreview&&t.msie&&(void 0===n.width&&(n.$preview.hide(),n.width=Math.ceil(n.$keyboard.width()),n.$preview.show()),n.$preview.width(n.width)),n.reposition(),n.checkDecimal(),n.lineHeight=parseInt(n.$preview.css("lineHeight"),10)||parseInt(n.$preview.css("font-size"),10)+4,s.caretToEnd&&n.saveCaret(n.originalContent.length,n.originalContent.length),t.allie&&(0===n.last.end&&n.last.start>0&&(n.last.end=n.last.start),n.last.start<0&&(n.last.start=n.last.end=n.originalContent.length)),i||a?(t.caret(n.$preview,n.last),n):(n.timer2=setTimeout(function(){n.opening=!1,/(number|email)/i.test(n.el.type)||s.caretToEnd||n.saveCaret(void 0,void 0,n.$el),(s.initialFocus||n.$el.hasClass(t.css.initialFocus))&&t.caret(n.$preview,n.last),n.last.eventTime=(new Date).getTime(),n.$el.trigger(t.events.kbVisible,[n,n.el]),n.timer=setTimeout(function(){n&&n.saveCaret()},200)},10),n);n.$el.addClass(r.noKeyboard)},n.updateLanguage=function(){var a=t.layouts,i=s.language||a[s.layout]&&a[s.layout].lang&&a[s.layout].lang||[s.language||"en"],r=t.language;i=(e.isArray(i)?i[0]:i).split("-")[0],s.display=e.extend(!0,{},r.en.display,r[i]&&r[i].display||{},n.settings.display),s.combos=e.extend(!0,{},r.en.combos,r[i]&&r[i].combos||{},n.settings.combos),s.wheelMessage=r[i]&&r[i].wheelMessage||r.en.wheelMessage,s.rtl=a[s.layout]&&a[s.layout].rtl||r[i]&&r[i].rtl||!1,n.regex=r[i]&&r[i].comboRegex||t.comboRegex,n.decimal=/^\./.test(s.display.dec),n.$el.toggleClass("rtl",s.rtl).css("direction",s.rtl?"rtl":"")},n.startup=function(){var a=t.css;(s.alwaysOpen||s.userClosed)&&n.$preview||n.makePreview(),n.hasKeyboard()||("custom"===s.layout&&(s.layoutHash="custom"+n.customHash()),n.layout="custom"===s.layout?s.layoutHash:s.layout,n.last.layout=n.layout,n.updateLanguage(),void 0===t.builtLayouts[n.layout]&&(e.isFunction(s.create)?n.$keyboard=s.create(n):n.$keyboard.length||n.buildKeyboard(n.layout,!0)),n.$keyboard=t.builtLayouts[n.layout].$keyboard.clone(),n.$keyboard.data("keyboard",n),""!==(n.el.id||"")&&n.$keyboard.attr("id",n.el.id+t.css.idSuffix),n.makePreview()),n.$decBtn=n.$keyboard.find("."+a.keyPrefix+"dec"),(s.enterNavigation||"TEXTAREA"===n.el.nodeName)&&n.alwaysAllowed.push(13),n.bindKeyboard(),n.$keyboard.appendTo(s.appendLocally?n.$el.parent():s.appendTo||"body"),n.bindKeys(),s.reposition&&e.ui&&e.ui.position&&"body"==s.appendTo&&e(window).bind("resize"+n.namespace,function(){n.reposition()})},n.reposition=function(){return n.position=!e.isEmptyObject(s.position)&&s.position,e.ui&&e.ui.position&&n.position&&(n.position.of=n.position.of||n.$el.data("keyboardPosition")||n.$el,n.position.collision=n.position.collision||"flipfit flipfit",n.position.at=s.usePreview?s.position.at:s.position.at2,n.isVisible()&&n.$keyboard.position(n.position)),n},n.makePreview=function(){if(s.usePreview){var a,i,r,o,l=t.css;for(n.$preview=n.$el.clone(!1).data("keyboard",n).removeClass(l.placeholder+" "+l.input).addClass(l.preview+" "+s.css.input).attr("tabindex","-1").show(),n.preview=n.$preview[0],"number"===n.preview.type&&(n.preview.type="text"),o=/^(data-|id|aria-haspopup)/i,a=(i=n.$preview.get(0).attributes).length-1;a>=0;a--)r=i[a]&&i[a].name,o.test(r)&&n.preview.removeAttribute(r);e("<div />").addClass(l.wrapper).append(n.$preview).prependTo(n.$keyboard)}else n.$preview=n.$el,n.preview=n.el},n.caret=function(e,a){return t.caret(n.$preview,e,a),n},n.saveCaret=function(e,a,i){if(n.isCurrent()){var s=t.caret(i||n.$preview,e,a);n.last.start=void 0===e?s.start:e,n.last.end=void 0===a?s.end:a}},n.setScroll=function(){if(n.last.virtual){var e,a,i,r,o="TEXTAREA"===n.preview.nodeName,l=n.last.val.substring(0,Math.max(n.last.start,n.last.end));n.$previewCopy||(n.$previewCopy=n.$preview.clone().removeAttr("id").css({position:"absolute",left:0,zIndex:-10,visibility:"hidden"}).addClass(t.css.inputClone),n.$previewCopy[0].disabled=!0,o||n.$previewCopy.css({"white-space":"pre",width:0}),s.usePreview?n.$preview.after(n.$previewCopy):n.$keyboard.prepend(n.$previewCopy)),o?(n.$previewCopy.height(n.lineHeight).val(l),n.preview.scrollTop=n.lineHeight*(Math.floor(n.$previewCopy[0].scrollHeight/n.lineHeight)-1)):(n.$previewCopy.val(l.replace(/\s/g," ")),i=/c/i.test(s.scrollAdjustment)?n.preview.clientWidth/2:s.scrollAdjustment,e=n.$previewCopy[0].scrollWidth-1,void 0===n.last.scrollWidth&&(n.last.scrollWidth=e,n.last.direction=!0),r=n.last.scrollWidth===e?n.last.direction:n.last.scrollWidth<e,a=n.preview.clientWidth-i,r?n.preview.scrollLeft=e<a?0:e-a:e>=n.preview.scrollWidth-a?n.preview.scrollLeft=n.preview.scrollWidth-i:n.preview.scrollLeft=e-i>0?e-i:0,n.last.scrollWidth=e,n.last.direction=r)}},n.bindFocus=function(){s.openOn&&n&&n.el.active&&(n.$el.bind(s.openOn+n.namespace,function(){n.focusOn()}),e(":focus")[0]===n.el&&n.$el.blur())},n.bindKeyboard=function(){var a,i=t.keyCodes,r=t.builtLayouts[n.layout],o=n.namespace+"keybindings";n.$preview.unbind(n.namespace).bind("click"+o+" touchstart"+o,function(){s.alwaysOpen&&!n.isCurrent()&&n.reveal(),n.timer2=setTimeout(function(){n&&n.saveCaret()},150)}).bind("keypress"+o,function(o){if(s.lockInput)return!1;if(n.isCurrent()){var l=o.charCode||o.which,c=l>=i.A&&l<=i.Z,d=l>=i.a&&l<=i.z,u=n.last.key=String.fromCharCode(l);if(!(l<i.space)){if(n.last.virtual=!1,n.last.event=o,n.last.$key=[],n.checkCaret&&n.saveCaret(),l!==i.capsLock&&(c||d)&&(n.capsLock=c&&!o.shiftKey||d&&o.shiftKey,n.capsLock&&!n.shiftActive&&(n.shiftActive=!0,n.showSet())),s.restrictInput){if((o.which===i.backSpace||0===o.which)&&e.inArray(o.keyCode,n.alwaysAllowed))return;-1===e.inArray(u,r.acceptedKeys)&&(o.preventDefault(),(a=e.extend({},o)).type=t.events.inputRestricted,n.$el.trigger(a,[n,n.el]))}else if((o.ctrlKey||o.metaKey)&&(o.which===i.A||o.which===i.C||o.which===i.V||o.which>=i.X&&o.which<=i.Z))return;r.hasMappedKeys&&r.mappedKeys.hasOwnProperty(u)&&(n.last.key=r.mappedKeys[u],n.insertText(n.last.key),o.preventDefault()),"function"==typeof s.beforeInsert&&(n.insertText(n.last.key),o.preventDefault()),n.checkMaxLength()}}}).bind("keyup"+o,function(a){if(n.isCurrent()){switch(n.last.virtual=!1,a.which){case i.tab:if(n.tab&&s.tabNavigation&&!s.lockInput){n.shiftActive=a.shiftKey;var r=t.keyaction.tab(n);if(n.tab=!1,!r)return!1}else a.preventDefault();break;case i.escape:return s.ignoreEsc||n.close(!(!s.autoAccept||!s.autoAcceptOnEsc)&&"true"),!1}clearTimeout(n.throttled),n.throttled=setTimeout(function(){n&&n.isVisible()&&n.checkCombos()},100),n.checkMaxLength(),n.last.preVal=""+n.last.val,n.last.val=n.$preview.val();var o=jQuery.Event(t.events.kbChange);if(o.action=n.last.key,n.$el.trigger(o,[n,n.el]),e.isFunction(s.change))return o.type=t.events.inputChange,s.change(o,n,n.el),!1;s.acceptValid&&s.autoAcceptOnValid&&e.isFunction(s.validate)&&s.validate(n,n.$preview.val())&&(n.$preview.blur(),n.accept())}}).bind("keydown"+o,function(e){if(n.last.keyPress=e.which,s.alwaysOpen&&!n.isCurrent()&&n.reveal(),e.which===i.tab)return n.tab=!0,!1;if(s.lockInput)return!1;switch(n.last.virtual=!1,e.which){case i.backSpace:t.keyaction.bksp(n,null,e),e.preventDefault();break;case i.enter:t.keyaction.enter(n,null,e);break;case i.capsLock:n.shiftActive=n.capsLock=!n.capsLock,n.showSet();break;case i.V:if(e.ctrlKey||e.metaKey){if(s.preventPaste)return void e.preventDefault();n.checkCombos()}}}).bind("mouseup touchend ".split(" ").join(o+" "),function(){n.last.virtual=!0,n.saveCaret()}),n.$keyboard.bind("mousedown click touchstart ".split(" ").join(n.namespace+" "),function(t){t.stopPropagation(),n.isCurrent()||(n.reveal(),e(document).trigger("checkkeyboard"+n.namespace)),!s.noFocus&&n.$preview&&n.$preview.focus()}),s.preventPaste&&(n.$preview.bind("contextmenu"+n.namespace,function(e){e.preventDefault()}),n.$el.bind("contextmenu"+n.namespace,function(e){e.preventDefault()}))},n.bindKeys=function(){var a=t.css;n.$allKeys=n.$keyboard.find("button."+a.keyButton).unbind(n.namespace+" "+n.namespace+"kb").bind("mouseenter mouseleave touchstart ".split(" ").join(n.namespace+" "),function(a){if(!s.alwaysOpen&&!s.userClosed||"mouseleave"===a.type||n.isCurrent()||(n.reveal(),s.noFocus||n.$preview.focus(),t.caret(n.$preview,n.last)),n.isCurrent()){var i,r,o=n.last,l=e(this),c=a.type;s.useWheel&&n.wheel&&(i=n.getLayers(l),r=(i.length?i.map(function(){return e(this).attr("data-value")||""}).get():"")||[l.text()],o.wheel_$Keys=i,o.wheelLayers=r,o.wheelIndex=e.inArray(l.attr("data-value"),r)),"mouseenter"!==c&&"touchstart"!==c||"password"===n.el.type||l.hasClass(s.css.buttonDisabled)||(l.addClass(s.css.buttonHover),s.useWheel&&n.wheel&&l.attr("title",function(e,t){return n.wheel&&""===t&&n.sets&&r.length>1&&"touchstart"!==c?s.wheelMessage:t})),"mouseleave"===c&&(l.removeClass("password"===n.el.type?"":s.css.buttonHover),s.useWheel&&n.wheel&&(o.wheelIndex=0,o.wheelLayers=[],o.wheel_$Keys=null,l.attr("title",function(e,t){return t===s.wheelMessage?"":t}).html(l.attr("data-html"))))}}).bind(s.keyBinding.split(" ").join(n.namespace+" ")+n.namespace+" "+t.events.kbRepeater,function(i){if(i.preventDefault(),!n.$keyboard.is(":visible"))return!1;var r,o,l=n.last,c=e(this),d=(new Date).getTime();if(s.useWheel&&n.wheel&&(c=(o=l.wheel_$Keys)&&l.wheelIndex>-1?o.eq(l.wheelIndex):c),r=c.attr("data-action"),!(d-(l.eventTime||0)<s.preventDoubleEventTime)){if(l.eventTime=d,l.event=i,l.virtual=!0,s.noFocus||n.$preview.focus(),l.$key=c,l.key=c.attr("data-value"),l.keyPress="",n.checkCaret&&t.caret(n.$preview,l),/^meta/.test(r)&&(r="meta"),r===l.key&&"string"==typeof t.keyaction[r])l.key=r=t.keyaction[r];else if(r in t.keyaction&&e.isFunction(t.keyaction[r])){if(!1===t.keyaction[r](n,this,i))return!1;r=null}return!!n.hasKeyboard()&&(void 0!==r&&null!==r&&(l.key=e(this).hasClass(a.keyAction)?r:l.key,n.insertText(l.key),n.capsLock||s.stickyShift||i.shiftKey||(n.shiftActive=!1,n.showSet(c.attr("data-name")))),t.caret(n.$preview,l),n.checkCombos(),i.type=t.events.kbChange,i.action=l.key,n.$el.trigger(i,[n,n.el]),l.preVal=""+l.val,l.val=n.$preview.val(),e.isFunction(s.change)?(i.type=t.events.inputChange,s.change(i,n,n.el),!1):void 0)}}).bind("mouseup"+n.namespace+" "+"mouseleave touchend touchmove touchcancel ".split(" ").join(n.namespace+"kb "),function(a){n.last.virtual=!0;var i,r=e(this);if("touchmove"===a.type){if(i=r.offset(),i.right=i.left+r.outerWidth(),i.bottom=i.top+r.outerHeight(),a.originalEvent.touches[0].pageX>=i.left&&a.originalEvent.touches[0].pageX<i.right&&a.originalEvent.touches[0].pageY>=i.top&&a.originalEvent.touches[0].pageY<i.bottom)return!0}else/(mouseleave|touchend|touchcancel)/i.test(a.type)?r.removeClass(s.css.buttonHover):(!s.noFocus&&n.isCurrent()&&n.isVisible()&&n.$preview.focus(),n.checkCaret&&t.caret(n.$preview,n.last));return n.mouseRepeat=[!1,""],clearTimeout(n.repeater),s.acceptValid&&s.autoAcceptOnValid&&e.isFunction(s.validate)&&s.validate(n,n.$preview.val())&&(n.$preview.blur(),n.accept()),!1}).bind("click"+n.namespace,function(){return!1}).not("."+a.keyAction).bind("mousewheel"+n.namespace,function(t,a){if(s.useWheel&&n.wheel){a=a||t.deltaY;var i,r=n.last.wheelLayers||[];return r.length>1?((i=n.last.wheelIndex+(a>0?-1:1))>r.length-1&&(i=0),i<0&&(i=r.length-1)):i=0,n.last.wheelIndex=i,e(this).html(r[i]),!1}}).add("."+a.keyPrefix+"tab bksp space enter".split(" ").join(",."+a.keyPrefix),n.$keyboard).bind("mousedown touchstart ".split(" ").join(n.namespace+"kb "),function(){if(0!==s.repeatRate){var t=e(this);n.mouseRepeat=[!0,t],setTimeout(function(){n&&n.mouseRepeat[0]&&n.mouseRepeat[1]===t&&!t[0].disabled&&n.repeatKey(t)},s.repeatDelay)}return!1})},n.insertText=function(e){if(n.$preview){if("function"==typeof s.beforeInsert&&(e=s.beforeInsert(n.last.event,n,n.el,e)),void 0!==e&&!1!==e){var a,i,r="\b"===e,o=n.$preview.val(),l=t.caret(n.$preview),c=o.length;return l.end<l.start&&(l.end=l.start),l.start>c&&(l.end=l.start=c),"TEXTAREA"===n.preview.nodeName&&t.msie&&"\n"===o.substr(l.start,1)&&(l.start+=1,l.end+=1),"{d}"===e&&(e="",i=l.start,l.end+=1),a=r&&l.start===l.end,e=r?"":e,o=o.substr(0,l.start-(a?1:0))+e+o.substr(l.end),i=l.start+(a?-1:e.length),n.$preview.val(o),n.saveCaret(i,i),n.setScroll(),n}n.last.key=""}},n.checkMaxLength=function(){if(n.$preview){var e,a,i=n.$preview.val();return!1!==s.maxLength&&i.length>s.maxLength&&(e=t.caret(n.$preview).start,a=Math.min(e,s.maxLength),s.maxInsert||(i=n.last.val,a=e-1),n.$preview.val(i.substring(0,s.maxLength)),n.saveCaret(a,a)),n.$decBtn.length&&n.checkDecimal(),n}},n.repeatKey=function(e){e.trigger(t.events.kbRepeater),n.mouseRepeat[0]&&(n.repeater=setTimeout(function(){n&&n.repeatKey(e)},n.repeatTime))},n.getKeySet=function(){var e=[];return n.altActive&&e.push("alt"),n.shiftActive&&e.push("shift"),n.metaActive&&e.push(n.metaActive),e.length?e.join("+"):"normal"},n.showKeySet=function(e){return"string"==typeof e?(n.last.keyset=[n.shiftActive,n.altActive,n.metaActive],n.shiftActive=/shift/i.test(e),n.altActive=/alt/i.test(e),/\bmeta/.test(e)?(n.metaActive=!0,n.showSet(e.match(/\bmeta[\w-]+/i)[0])):(n.metaActive=!1,n.showSet())):n.showSet(e),n},n.showSet=function(e){if(n.hasKeyboard()){s=n.options;var a=t.css,i="."+a.keyPrefix,r=s.css.buttonActive,o="",l=(n.shiftActive?1:0)+(n.altActive?2:0);if(n.shiftActive||(n.capsLock=!1),n.metaActive?(n.shiftActive&&(e=(e||"").replace("-shift","")),n.altActive&&(e=(e||"").replace("-alt","")),""===(o=/^meta/i.test(e)?e:"")?o=!0===n.metaActive?"":n.metaActive:n.metaActive=o,(!s.stickyShift&&n.last.keyset[2]!==n.metaActive||(n.shiftActive||n.altActive)&&!n.$keyboard.find("."+a.keySet+"-"+o+n.rows[l]).length)&&(n.shiftActive=n.altActive=!1)):!s.stickyShift&&n.last.keyset[2]!==n.metaActive&&n.shiftActive&&(n.shiftActive=n.altActive=!1),l=(n.shiftActive?1:0)+(n.altActive?2:0),o=0!==l||n.metaActive?""===o?"":"-"+o:"-normal",!n.$keyboard.find("."+a.keySet+o+n.rows[l]).length)return n.shiftActive=n.last.keyset[0],n.altActive=n.last.keyset[1],void(n.metaActive=n.last.keyset[2]);n.$keyboard.find(i+"alt,"+i+"shift,."+a.keyAction+"[class*=meta]").removeClass(r).end().find(i+"alt").toggleClass(r,n.altActive).end().find(i+"shift").toggleClass(r,n.shiftActive).end().find(i+"lock").toggleClass(r,n.capsLock).end().find("."+a.keySet).hide().end().find("."+(a.keyAction+i+o).replace("--","-")).addClass(r),n.$keyboard.find("."+a.keySet+o+n.rows[l])[0].style.display="inline-block",n.metaActive&&n.$keyboard.find(i+n.metaActive).toggleClass(r,!1!==n.metaActive),n.last.keyset=[n.shiftActive,n.altActive,n.metaActive],n.$el.trigger(t.events.kbKeysetChange,[n,n.el]),s.reposition&&n.reposition()}},n.checkCombos=function(){if(!(n.isVisible()||n.hasKeyboard()&&n.$keyboard.hasClass(t.css.hasFocus)))return(n.$preview||n.$el).val();var a,i,r,o=n.$preview.val(),l=t.caret(n.$preview),c=t.builtLayouts[n.layout],d=o.length;return""===o?(s.acceptValid&&n.checkValid(),o):(l.end<l.start&&(l.end=l.start),l.start>d&&(l.end=l.start=d),t.msie&&"\n"===o.substr(l.start,1)&&(l.start+=1,l.end+=1),s.useCombos&&(t.msie?o=o.replace(n.regex,function(e,t,a){return s.combos.hasOwnProperty(t)?s.combos[t][a]||e:e}):n.$preview.length&&(i=l.start-(l.start-2>=0?2:0),t.caret(n.$preview,i,l.end),r=(t.caret(n.$preview).text||"").replace(n.regex,function(e,t,a){return s.combos.hasOwnProperty(t)?s.combos[t][a]||e:e}),(i=t.caret(n.$preview))&&i.replaceStr&&n.$preview.val(i.replaceStr(r)),o=n.$preview.val())),s.restrictInput&&""!==o&&(i=c.acceptedKeys.length,(a=c.acceptedKeysRegex)||(r=e.map(c.acceptedKeys,function(e){return e.replace(n.escapeRegex,"\\$&")}),a=c.acceptedKeysRegex=new RegExp("("+r.join("|")+")","g")),(r=o.match(a))?o=r.join(""):(o="",d=0)),l.start+=o.length-d,l.end+=o.length-d,n.$preview.val(o),n.saveCaret(l.start,l.end),n.setScroll(),n.checkMaxLength(),s.acceptValid&&n.checkValid(),o)},n.checkValid=function(){var a=t.css,i=n.$keyboard.find("."+a.keyPrefix+"accept"),r=!0;e.isFunction(s.validate)&&(r=s.validate(n,n.$preview.val(),!1)),i.toggleClass(a.inputInvalid,!r).toggleClass(a.inputValid,r).attr("title",i.attr("data-title")+" ("+s.display[r?"valid":"invalid"]+")")},n.checkDecimal=function(){n.decimal&&/\./g.test(n.preview.value)||!n.decimal&&/\,/g.test(n.preview.value)?n.$decBtn.attr({disabled:"disabled","aria-disabled":"true"}).removeClass(s.css.buttonHover).addClass(s.css.buttonDisabled):n.$decBtn.removeAttr("disabled").attr({"aria-disabled":"false"}).addClass(s.css.buttonDefault).removeClass(s.css.buttonDisabled)},n.getLayers=function(a){var i=t.css,s=a.attr("data-pos");return a.closest("."+i.keyboard).find('button[data-pos="'+s+'"]').filter(function(){return""!==e(this).find("."+i.keyText).text()}).add(a)},n.switchInput=function(t,a){if(e.isFunction(s.switchInput))s.switchInput(n,t,a);else{n.$keyboard.length&&n.$keyboard.hide();var i,r=!1,o=e("button, input, select, textarea, a").filter(":visible").not(":disabled"),l=o.index(n.$el)+(t?1:-1);if(n.$keyboard.length&&n.$keyboard.show(),l>o.length-1&&(r=s.stopAtEnd,l=0),l<0&&(r=s.stopAtEnd,l=o.length-1),!r){if(!(a=n.close(a)))return;(i=o.eq(l).data("keyboard"))&&i.options.openOn.length?i.focusOn():o.eq(l).focus()}}return!1},n.close=function(a){if(n.isOpen&&n.$keyboard.length){clearTimeout(n.throttled);var i=t.css,r=t.events,o=a?n.checkCombos():n.originalContent;if(a&&e.isFunction(s.validate)&&!s.validate(n,o,!0)&&(o=n.originalContent,a=!1,s.cancelClose))return;n.isCurrent(!1),n.isOpen=s.alwaysOpen||s.userClosed,n.$preview.val(o),n.$el.removeClass(i.isCurrent+" "+i.inputAutoAccepted).addClass(a?!0===a?"":i.inputAutoAccepted:"").val(o).trigger(r.inputChange),s.alwaysOpen||n.$el.trigger(r.kbBeforeClose,[n,n.el,a||!1]),t.caret(n.$preview,n.last),n.$el.trigger(a?r.inputAccepted:r.inputCanceled,[n,n.el]).trigger(s.alwaysOpen?r.kbInactive:r.kbHidden,[n,n.el]).blur(),n&&(n.last.eventTime=(new Date).getTime(),s.alwaysOpen||s.userClosed&&"true"===a||!n.$keyboard.length||(n.removeKeyboard(),n.timer=setTimeout(function(){n&&n.bindFocus()},500)),n.watermark||""!==n.el.value||""===n.inPlaceholder||n.$el.addClass(i.placeholder).val(n.inPlaceholder))}return!!a},n.accept=function(){return n.close(!0)},n.checkClose=function(t){if(!n.opening){n.escClose(t);var a=e.keyboard.css,i=e(t.target);if(i.hasClass(a.input)){var r=i.data("keyboard");r!==n&&!r.$el.hasClass(a.isCurrent)&&r.options.openOn&&t.type===s.openOn&&r.focusOn()}}},n.escClose=function(a){if(a&&"keyup"===a.type)return a.which!==t.keyCodes.escape||s.ignoreEsc?"":n.close(!(!s.autoAccept||!s.autoAcceptOnEsc)&&"true");if(n.isOpen&&(!n.isCurrent()&&n.isOpen||n.isOpen&&a.target!==n.el)){if((s.stayOpen||s.userClosed)&&!e(a.target).hasClass(t.css.input))return;if(t.allie&&a.preventDefault(),s.closeByClickEvent){var i=a.target.nodeName.toLowerCase();"input"!==i&&"textarea"!==i&&"click"!==a.type||n.close(!!s.autoAccept&&"true")}else n.close(!!s.autoAccept&&"true")}},n.keyBtn=e("<button />").attr({role:"button",type:"button","aria-disabled":"false",tabindex:"-1"}).addClass(t.css.keyButton),n.processName=function(e){var t,a,i=(e||"").replace(/[^a-z0-9-_]/gi,""),s=i.length,n=[];if(s>1&&e===i)return e;if(s=e.length){for(t=0;t<s;t++)a=e[t],n.push(/[a-z0-9-_]/i.test(a)?/[-_]/.test(a)&&0!==t?"":a:(0===t?"":"-")+a.charCodeAt(0));return n.join("")}return e},n.processKeys=function(t){var a,i=t.split(":"),s={name:null,map:"",title:""};return/\(.+\)/.test(i[0])||/^:\(.+\)/.test(t)||/\([(:)]\)/.test(t)?/\([(:)]\)/.test(t)?(a=i[0].match(/([^(]+)\((.+)\)/))&&a.length?(s.name=a[1],s.map=a[2],s.title=i.length>1?i.slice(1).join(":"):""):(s.name=t.match(/([^(]+)/)[0],":"===s.name&&(i=i.slice(1)),null===a&&(s.map=":",i=i.slice(2)),s.title=i.length?i.join(":"):""):(s.map=t.match(/\(([^()]+?)\)/)[1],""===(a=(t=t.replace(/\(([^()]+)\)/,"")).split(":"))[0]?(s.name=":",i=i.slice(1)):s.name=a[0],s.title=i.length>1?i.slice(1).join(":"):""):(""!==t&&""===i[0]?(s.name=":",i=i.slice(1)):s.name=i[0],s.title=i.length>1?i.slice(1).join(":"):""),s.title=e.trim(s.title).replace(/_/g," "),s},n.addKey=function(e,a,i){var r,o,l,c={},d=n.processKeys(i?e:a),u=t.css;return!i&&s.display[d.name]?(l=n.processKeys(s.display[d.name])).action=n.processKeys(e).name:(l=d).action=d.name,c.name=n.processName(d.name),""!==l.map?(t.builtLayouts[n.layout].mappedKeys[l.map]=l.name,t.builtLayouts[n.layout].acceptedKeys.push(l.name)):i&&t.builtLayouts[n.layout].acceptedKeys.push(l.name),r=i?""===c.name?"":u.keyPrefix+c.name:u.keyAction+" "+u.keyPrefix+l.action,r+=(l.name.length>2?" "+u.keyWide:"")+" "+s.css.buttonDefault,c.html='<span class="'+u.keyText+'">'+l.name.replace(/[\u00A0-\u9999]/gim,function(e){return"&#"+e.charCodeAt(0)+";"})+"</span>",c.$key=n.keyBtn.clone().attr({"data-value":i?l.name:l.action,"data-name":l.action,"data-pos":n.temp[1]+","+n.temp[2],"data-action":l.action,"data-html":c.html}).addClass(r).html(c.html).appendTo(n.temp[0]),l.map&&c.$key.attr("data-mapped",l.map),(l.title||d.title)&&c.$key.attr({"data-title":d.title||l.title,title:d.title||l.title}),"function"==typeof s.buildKey&&(o=(c=s.buildKey(n,c)).$key.html(),c.$key.attr("data-html",o)),c.$key},n.customHash=function(e){var t,a,i,n,r=[],o=[];e=void 0===e?s.customLayout:e;for(a in e)e.hasOwnProperty(a)&&r.push(e[a]);if(o=o.concat.apply(o,r).join(" "),i=0,0===(n=o.length))return i;for(t=0;t<n;t++)i=(i<<5)-i+o.charCodeAt(t),i&=i;return i},n.buildKeyboard=function(a,i){e.isEmptyObject(s.display)&&n.updateLanguage();var r,o,l,c=t.css,d=0,u=t.builtLayouts[a||n.layout||s.layout]={mappedKeys:{},acceptedKeys:[]},p=u.acceptedKeys=s.restrictInclude?(""+s.restrictInclude).split(/\s+/)||[]:[],y=c.keyboard+" "+s.css.popup+" "+s.css.container+(s.alwaysOpen||s.userClosed?" "+c.alwaysOpen:""),v=e("<div />").addClass(y).attr({role:"textbox"}).hide();return i&&"custom"===s.layout||!t.layouts.hasOwnProperty(s.layout)?(s.layout="custom",y=t.layouts.custom=s.customLayout||{normal:["{cancel}"]}):y=t.layouts[i?s.layout:a||n.layout||s.layout],e.each(y,function(t,a){if(""!==t&&!/^(name|lang|rtl)$/i.test(t))for("default"===t&&(t="normal"),d++,o=e("<div />").attr("name",t).addClass(c.keySet+" "+c.keySet+"-"+t).appendTo(v).toggle("normal"===t),r=0;r<a.length;r++)l=e.trim(a[r]).replace(/\{(\.?)[\s+]?:[\s+]?(\.?)\}/g,"{$1:$2}"),n.buildRow(o,r,l.split(/\s+/),p),o.find("."+c.keyButton+",."+c.keySpacer).filter(":last").after('<br class="'+c.endRow+'"/>')}),d>1&&(n.sets=!0),u.hasMappedKeys=!e.isEmptyObject(u.mappedKeys),u.$keyboard=v,v},n.buildRow=function(a,i,r,o){var l,c,d,u,p,y,v=t.css;for(d=0;d<r.length;d++)if(n.temp=[a,i,d],u=!1,0!==r[d].length)if(/^\{\S+\}$/.test(r[d])){if(p=r[d].match(/^\{(\S+)\}$/)[1],/\!\!/.test(p)&&(p=p.replace("!!",""),u=!0),/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i.test(p)&&(y=parseFloat(p.replace(/,/,".").match(/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1]||0),e('<span class="'+v.keyText+'"></span>').width(p.match(/px/i)?y+"px":2*y+"em").addClass(v.keySpacer).appendTo(a)),/^empty(:((\d+)?([\.|,]\d+)?)(em|px)?)?$/i.test(p)){y=/:/.test(p)?parseFloat(p.replace(/,/,".").match(/^empty:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1]||0):"",n.addKey(""," ",!0).addClass(s.css.buttonDisabled+" "+s.css.buttonEmpty).attr("aria-disabled",!0).width(y?p.match("px")?y+"px":2*y+"em":"");continue}if(/^meta[\w-]+\:?(\w+)?/i.test(p)){n.addKey(p.split(":")[0],p).addClass(v.keyHasActive);continue}switch((c=p.split(":"))[0].toLowerCase()){case"a":case"accept":n.addKey("accept",p).addClass(s.css.buttonAction+" "+v.keyAction);break;case"alt":case"altgr":n.addKey("alt",p).addClass(v.keyHasActive);break;case"b":case"bksp":n.addKey("bksp",p);break;case"c":case"cancel":n.addKey("cancel",p).addClass(s.css.buttonAction+" "+v.keyAction);break;case"combo":n.addKey("combo",p).addClass(v.keyHasActive).attr("title",function(e,t){return t+" "+s.display[s.useCombos?"active":"disabled"]}).toggleClass(s.css.buttonActive,s.useCombos);break;case"dec":o.push(n.decimal?".":","),n.addKey("dec",p);break;case"e":case"enter":n.addKey("enter",p).addClass(s.css.buttonAction+" "+v.keyAction);break;case"lock":n.addKey("lock",p).addClass(v.keyHasActive);break;case"s":case"shift":n.addKey("shift",p).addClass(v.keyHasActive);break;case"sign":o.push("-"),n.addKey("sign",p);break;case"space":o.push(" "),n.addKey("space",p);break;case"t":case"tab":n.addKey("tab",p);break;default:t.keyaction.hasOwnProperty(c[0])&&n.addKey(c[0],p).toggleClass(s.css.buttonAction+" "+v.keyAction,u)}}else l=r[d],n.addKey(l,l,!0)},n.removeBindings=function(t){e(document).unbind(t),n.el.ownerDocument!==document&&e(n.el.ownerDocument).unbind(t),e(window).unbind(t),n.$el.unbind(t)},n.removeKeyboard=function(){n.$allKeys=[],n.$decBtn=[],s.usePreview&&n.$preview.removeData("keyboard"),n.$preview.unbind(n.namespace+"keybindings"),n.preview=null,n.$preview=null,n.$previewCopy=null,n.$keyboard.removeData("keyboard"),n.$keyboard.remove(),n.$keyboard=[],n.isOpen=!1,n.isCurrent(!1)},n.destroy=function(e){var a,i=t.css,r=n.extensionNamespace.length,o=[i.input,i.locked,i.placeholder,i.noKeyboard,i.alwaysOpen,s.css.input,i.isCurrent].join(" ");for(clearTimeout(n.timer),clearTimeout(n.timer2),n.$keyboard.length&&n.removeKeyboard(),n.removeBindings(n.namespace),n.removeBindings(n.namespace+"callbacks"),a=0;a<r;a++)n.removeBindings(n.extensionNamespace[a]);n.el.active=!1,n.$el.removeClass(o).removeAttr("aria-haspopup").removeAttr("role").removeData("keyboard"),n=null,"function"==typeof e&&e()},n.init()};return t.keyCodes={backSpace:8,tab:9,enter:13,capsLock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,A:65,Z:90,V:86,C:67,X:88,a:97,z:122},t.css={idSuffix:"_keyboard",initialFocus:"keyboard-init-focus",input:"ui-keyboard-input",inputClone:"ui-keyboard-preview-clone",wrapper:"ui-keyboard-preview-wrapper",preview:"ui-keyboard-preview",keyboard:"ui-keyboard",keySet:"ui-keyboard-keyset",keyButton:"ui-keyboard-button",keyWide:"ui-keyboard-widekey",keyPrefix:"ui-keyboard-",keyText:"ui-keyboard-text",keyHasActive:"ui-keyboard-hasactivestate",keyAction:"ui-keyboard-actionkey",keySpacer:"ui-keyboard-spacer",keyToggle:"ui-keyboard-toggle",keyDisabled:"ui-keyboard-disabled",locked:"ui-keyboard-lockedinput",alwaysOpen:"ui-keyboard-always-open",noKeyboard:"ui-keyboard-nokeyboard",placeholder:"ui-keyboard-placeholder",hasFocus:"ui-keyboard-has-focus",isCurrent:"ui-keyboard-input-current",inputValid:"ui-keyboard-valid-input",inputInvalid:"ui-keyboard-invalid-input",inputAutoAccepted:"ui-keyboard-autoaccepted",endRow:"ui-keyboard-button-endrow"},t.events={kbChange:"keyboardChange",kbBeforeClose:"beforeClose",kbBeforeVisible:"beforeVisible",kbVisible:"visible",kbInit:"initialized",kbInactive:"inactive",kbHidden:"hidden",kbRepeater:"repeater",kbKeysetChange:"keysetChange",inputAccepted:"accepted",inputCanceled:"canceled",inputChange:"change",inputRestricted:"restricted"},t.keyaction={accept:function(e){return e.close(!0),!1},alt:function(e){e.altActive=!e.altActive,e.showSet()},bksp:function(e){e.insertText("\b")},cancel:function(e){return e.close(),!1},clear:function(e){e.$preview.val(""),e.$decBtn.length&&e.checkDecimal()},combo:function(e){var a=e.options,i=!a.useCombos,s=e.$keyboard.find("."+t.css.keyPrefix+"combo");return a.useCombos=i,s.toggleClass(a.css.buttonActive,i).attr("title",s.attr("data-title")+" ("+a.display[i?"active":"disabled"]+")"),i&&e.checkCombos(),!1},dec:function(e){e.insertText(e.decimal?".":",")},del:function(e){e.insertText("{d}")},default:function(e){e.shiftActive=e.altActive=e.metaActive=!1,e.showSet()},enter:function(a,i,s){var n=a.el.nodeName,r=a.options;return s.shiftKey||a.shiftActive?r.enterNavigation?a.switchInput(!s[r.enterMod],!0):a.close(!0):r.enterNavigation&&("TEXTAREA"!==n||s[r.enterMod])?a.switchInput(!s[r.enterMod],!!r.autoAccept&&"true"):void("TEXTAREA"===n&&e(s.target).closest("button").length&&a.insertText((t.msie?" ":"")+"\n"))},lock:function(e){e.last.keyset[0]=e.shiftActive=e.capsLock=!e.capsLock,e.showSet()},left:function(e){var a=t.caret(e.$preview);a.start-1>=0&&(e.last.start=e.last.end=a.start-1,t.caret(e.$preview,e.last),e.setScroll())},meta:function(t,a){var i=e(a);t.metaActive=!i.hasClass(t.options.css.buttonActive),t.showSet(i.attr("data-name"))},next:function(e){return e.switchInput(!0,e.options.autoAccept),!1},normal:function(e){e.shiftActive=e.altActive=e.metaActive=!1,e.showSet()},prev:function(e){return e.switchInput(!1,e.options.autoAccept),!1},right:function(e){var a=t.caret(e.$preview);a.start+1<=e.$preview.val().length&&(e.last.start=e.last.end=a.start+1,t.caret(e.$preview,e.last),e.setScroll())},shift:function(e){e.last.keyset[0]=e.shiftActive=!e.shiftActive,e.showSet()},sign:function(e){/^\-?\d*\.?\d*$/.test(e.$preview.val())&&e.$preview.val(-1*e.$preview.val())},space:function(e){e.insertText(" ")},tab:function(e){var t=e.el.nodeName,a=e.options;if("INPUT"===t)return!!a.tabNavigation&&e.switchInput(!e.shiftActive,!0);e.insertText("\t")},toggle:function(e){e.enabled=!e.enabled,e.toggle()},NBSP:" ",ZWSP:"​",ZWNJ:"‌",ZWJ:"‍",LRM:"‎",RLM:"‏"},t.builtLayouts={},t.layouts={alpha:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} a b c d e f g h i j [ ] \\","k l m n o p q r s ; ' {enter}","{shift} t u v w x y z , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} A B C D E F G H I J { } |",'K L M N O P Q R S : " {enter}',"{shift} T U V W X Y Z < > ? {shift}","{accept} {space} {cancel}"]},qwerty:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {space} {cancel}"]},international:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["~ ¡ ² ³ ¤ € ¼ ½ ¾ ‘ ’ ¥ × {bksp}","{tab} ä å é ® þ ü ú í ó ö « » ¬","á ß ð f g h j k ø ¶ ´ {enter}","{shift} æ x © v b ñ µ ç > ¿ {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":["~ ¹ ² ³ £ € ¼ ½ ¾ ‘ ’ ¥ ÷ {bksp}","{tab} Ä Å É ® Þ Ü Ú Í Ó Ö « » ¦","Ä § Ð F G H J K Ø ° ¨ {enter}","{shift} Æ X ¢ V B Ñ µ Ç . ¿ {shift}","{accept} {alt} {space} {alt} {cancel}"]},colemak:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w f p g j l u y ; [ ] \\","{bksp} a r s t d h n e i o ' {enter}","{shift} z x c v b k m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W F P G J L U Y : { } |",'{bksp} A R S T D H N E I O " {enter}',"{shift} Z X C V B K M < > ? {shift}","{accept} {space} {cancel}"]},dvorak:{normal:["` 1 2 3 4 5 6 7 8 9 0 [ ] {bksp}","{tab} ' , . p y f g c r l / = \\","a o e u i d h t n s - {enter}","{shift} ; q j k x b m w v z {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) { } {bksp}",'{tab} " < > P Y F G C R L ? + |',"A O E U I D H T N S _ {enter}","{shift} : Q J K X B M W V Z {shift}","{accept} {space} {cancel}"]},num:{normal:["= ( ) {b}","{clear} / * -","7 8 9 +","4 5 6 {sign}","1 2 3 %","0 {dec} {a} {c}"]}},t.language={en:{display:{a:"✔:Accept (Shift+Enter)",accept:"Accept:Accept (Shift+Enter)",alt:"Alt:⌥ AltGr",b:"⌫:Backspace",bksp:"Bksp:Backspace",c:"✖:Cancel (Esc)",cancel:"Cancel:Cancel (Esc)",clear:"C:Clear",combo:"ö:Toggle Combo Keys",dec:".:Decimal",e:"⏎:Enter",empty:" ",enter:"Enter:Enter ⏎",left:"←",lock:"Lock:⇪ Caps Lock",next:"Next ⇨",prev:"⇦ Prev",right:"→",s:"⇧:Shift",shift:"Shift:Shift",sign:"±:Change Sign",space:" :Space",t:"⇥:Tab",tab:"⇥ Tab:Tab",toggle:" ",valid:"valid",invalid:"invalid",active:"active",disabled:"disabled"},wheelMessage:"Use mousewheel to see other keys",comboRegex:/([`\'~\^\"ao])([a-z])/gim,combos:{"`":{a:"à",A:"À",e:"è",E:"È",i:"ì",I:"Ì",o:"ò",O:"Ò",u:"ù",U:"Ù",y:"ỳ",Y:"Ỳ"},"'":{a:"á",A:"Á",e:"é",E:"É",i:"í",I:"Í",o:"ó",O:"Ó",u:"ú",U:"Ú",y:"ý",Y:"Ý"},'"':{a:"ä",A:"Ä",e:"ë",E:"Ë",i:"ï",I:"Ï",o:"ö",O:"Ö",u:"ü",U:"Ü",y:"ÿ",Y:"Ÿ"},"^":{a:"â",A:"Â",e:"ê",E:"Ê",i:"î",I:"Î",o:"ô",O:"Ô",u:"û",U:"Û",y:"ŷ",Y:"Ŷ"},"~":{a:"ã",A:"Ã",e:"ẽ",E:"Ẽ",i:"ĩ",I:"Ĩ",o:"õ",O:"Õ",u:"ũ",U:"Ũ",y:"ỹ",Y:"Ỹ",n:"ñ",N:"Ñ"}}}},t.defaultOptions={language:null,rtl:!1,layout:"qwerty",customLayout:null,position:{of:null,my:"center top",at:"center top",at2:"center bottom"},reposition:!0,usePreview:!0,alwaysOpen:!1,initialFocus:!0,noFocus:!1,stayOpen:!1,userClosed:!1,ignoreEsc:!1,closeByClickEvent:!1,css:{input:"ui-widget-content ui-corner-all",container:"ui-widget-content ui-widget ui-corner-all ui-helper-clearfix",popup:"",buttonDefault:"ui-state-default ui-corner-all",buttonHover:"ui-state-hover",buttonAction:"ui-state-active",buttonActive:"ui-state-active",buttonDisabled:"ui-state-disabled",buttonEmpty:"ui-keyboard-empty"},autoAccept:!1,autoAcceptOnEsc:!1,lockInput:!1,restrictInput:!1,restrictInclude:"",acceptValid:!1,autoAcceptOnValid:!1,cancelClose:!0,tabNavigation:!1,enterNavigation:!1,enterMod:"altKey",stopAtEnd:!0,appendLocally:!1,appendTo:"body",stickyShift:!0,preventPaste:!1,caretToEnd:!1,scrollAdjustment:10,maxLength:!1,maxInsert:!0,repeatDelay:500,repeatRate:20,resetDefault:!0,openOn:"focus",keyBinding:"mousedown touchstart",useWheel:!0,useCombos:!0,validate:function(e,t,a){return!0}},t.comboRegex=/([`\'~\^\"ao])([a-z])/gim,t.currentKeyboard="",e('\x3c!--[if lte IE 8]><script>jQuery("body").addClass("oldie");<\/script><![endif]--\x3e\x3c!--[if IE]><script>jQuery("body").addClass("ie");<\/script><![endif]--\x3e').appendTo("body").remove(),t.msie=e("body").hasClass("oldie"),t.allie=e("body").hasClass("ie"),t.watermark=void 0!==document.createElement("input").placeholder,t.checkCaretSupport=function(){if("boolean"!=typeof t.checkCaret){var a=e('<div style="height:0px;width:0px;overflow:hidden;position:fixed;top:0;left:-100px;"><input type="text" value="testing"/></div>').prependTo("body");t.caret(a.find("input"),3,3),t.checkCaret=3!==t.caret(a.find("input").hide().show()).start,a.remove()}return t.checkCaret},t.caret=function(e,t,a){if(!e||!e.length||e.is(":hidden")||"hidden"===e.css("visibility"))return{};var i,s,n,r,o=e.data("keyboard"),l=o&&o.options.noFocus;return l||e.focus(),void 0!==t?("object"==typeof t&&"start"in t&&"end"in t?(i=t.start,s=t.end):void 0===a&&(a=t),"number"==typeof t&&"number"==typeof a?(i=t,s=a):"start"===t?i=s=0:"string"==typeof t&&(i=s=e.val().length),e.caret(i,s,l)):(r=e.caret(),i=r.start,s=r.end,n=e[0].value||e.text()||"",{start:i,end:s,text:n.substring(i,s),replaceStr:function(e){return n.substring(0,i)+e+n.substring(s,n.length)}})},e.fn.keyboard=function(t){return this.each(function(){e(this).data("keyboard")||new e.keyboard(this,t)})},e.fn.getkeyboard=function(){return this.data("keyboard")},e.fn.caret=function(e,t,a){if(void 0===this[0]||this.is(":hidden")||"hidden"===this.css("visibility"))return this;var i,s,n,r,o,l=document.selection,c=this,d=c[0],u=d.scrollTop,p=!1,y=!0;try{p="selectionStart"in d}catch(e){y=!1}return y&&void 0!==e?(/(email|number)/i.test(d.type)||(p?(d.selectionStart=e,d.selectionEnd=t):((i=d.createTextRange()).collapse(!0),i.moveStart("character",e),i.moveEnd("character",t-e),i.select())),a||!c.is(":visible")&&"hidden"===c.css("visibility")||d.focus(),d.scrollTop=u,this):(/(email|number)/i.test(d.type)?e=t=c.val().length:p?(e=d.selectionStart,t=d.selectionEnd):l?"TEXTAREA"===d.nodeName?(o=c.val(),(n=(s=l.createRange()).duplicate()).moveToElementText(d),n.setEndPoint("EndToEnd",s),e=n.text.replace(/\r/g,"\n").length,t=e+s.text.replace(/\r/g,"\n").length):(o=c.val().replace(/\r/g,"\n"),(s=l.createRange().duplicate()).moveEnd("character",o.length),e=""===s.text?o.length:o.lastIndexOf(s.text),(s=l.createRange().duplicate()).moveStart("character",-o.length),t=s.text.length):e=t=(d.value||"").length,r=d.value||"",{start:e,end:t,text:r.substring(e,t),replace:function(a){return r.substring(0,e)+a+r.substring(t,r.length)}})},t});