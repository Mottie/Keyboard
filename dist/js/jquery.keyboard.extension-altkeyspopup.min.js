/*! jQuery UI Virtual Keyboard Alt Key Popup v1.0.1 */
/*
 * for Keyboard v1.18+ only (7/7/2015)
 *
 * By Rob Garrison (aka Mottie)
 * Licensed under the MIT License
 *
*/
/*jshint browser:true, jquery:true, unused:false */
/*global require:false, define:false, module:false */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var b=a.keyboard;a.extend(b.css,{altKeyPopup:"ui-keyboard-popup",altKeyOverlay:"ui-keyboard-overlay"}),b.altKeys=a.extend({a:"å æ ā ă ą à á â ã ä",// å æ ā ă ą à á â ã ä
A:"Å Æ Ā Ă Ą À Á Â Ã Ä",// Å Æ Ā Ă Ą À Á Â Ã Ä
c:"ç ć ĉ ċ č",// ç ć ĉ ċ č
C:"Ç Ć Ĉ Ċ Č",// Ç Ć Ĉ Ċ Č
d:"ď ð ď",// ď ð ď
D:"Ď Ð Ď",// Ď Ð Ď
e:"ė ę ĕ ě ə è é ê ë ē",// ė ę ĕ ě ə è é ê ë ē
E:"Ė Ę Ĕ Ě Ǝ È É Ê Ë Ē",// Ė Ę Ĕ Ě Ǝ È É Ê Ë Ē
g:"ģ ğ ĝ ġ",// ģ ğ ĝ ġ
G:"Ģ Ğ Ĝ Ġ",// Ģ Ğ Ĝ Ġ
h:"ĥ ħ",// ĥ ħ
H:"Ĥ Ħ",// Ĥ Ħ
i:"ı į ī ï î í ì ĩ ĭ",// ı į ī ï î í ì ĩ ĭ
I:"İ Į Ī Ï Î Í Ì Ĩ Ĭ",// İ Į Ī Ï Î Í Ì Ĩ Ĭ
j:"ĵ",// ĵ
J:"Ĵ",// Ĵ
k:"ķ",// ķ
K:"Ķ",// Ķ
l:"Ł Ľ Ļ Ĺ Ŀ",// Ł Ľ Ļ Ĺ Ŀ
L:"ł ľ ļ ĺ ŀ",// ł ľ ļ ĺ ŀ
n:"ŉ ň ņ ń ñ",// ŉ ň ņ ń ñ
N:"ŉ Ň Ņ Ń Ñ",// ŉ Ň Ņ Ń Ñ
o:"œ ő ø ö õ ô ó ò ō ŏ",// œ ő ø ö õ ô ó ò ō ŏ
O:"Œ Ő Ø Ö Õ Ô Ó Ò Ō Ŏ",// Œ Ő Ø Ö Õ Ô Ó Ò Ō Ŏ
r:"ŕ ř ŗ",// ŕ ř ŗ
R:"Ŕ Ř Ŗ",// Ŕ Ř Ŗ
s:"ś š ş ß § ŝ",// ś š ş ß § ŝ
S:"Ś Š Ş ẞ § Ŝ",// Ś Š Ş ẞ § Ŝ
t:"þ ť ț ţ ŧ",// þ ť ț ţ ŧ
T:"Þ Ť Ț Ţ Ŧ",// Þ Ť Ț Ţ Ŧ
u:"ų ű ů ū ü û ú ù ũ ŭ",// ų ű ů ū ü û ú ù ũ ŭ
U:"Ų Ű Ů Ū Ü Û Ú Ù Ũ Ŭ",// Ų Ű Ů Ū Ü Û Ú Ù Ũ Ŭ
w:"ŵ",// ŵ
W:"Ŵ",// Ŵ
y:"ý",// ý
Y:"Ý",// Ý
z:"ź ż ž",// ź ż ž
Z:"Ź Ż Ž",// Ź Ż Ž
"!":"¡",// ¡
$:"€ £ ¤ ¥ ¢ ₡ ₱ ₩ ₹ ₪ ₭ ₮ ₦ ₤",// €£¤¥¢₡₱₩₹₪₭₮₦₤
"?":"¿",// ¿
"'":"〈 「 『 “",// 〈 「 『 “
'"':"〉 」 』 ”",// 〉 」 』 ”
"(":"《 【 〔",// « 【 〔
")":"》 】 〕"},b.altKeys),a.fn.addAltKeyPopup=function(c){
//Set the default values, use comma to separate the settings, example:
var d={
// time to hold down a button in ms to trigger a popup
holdTime:500,
// event triggered when popup is visible
popupVisible:"popup-visible"};return this.each(function(){
// make sure a keyboard is attached
var e,f=a(this).data("keyboard");f&&(
// variables
f.altkeypopup_options=a.extend({},d,c),e=f.altkeypopup_namespace=f.namespace+"AltKeyPopup",f.extensionNamespace.push(e),f.altkeypopup_setup=function(){var c,d="mousedown touchstart ".split(" ").join(e+" "),g="mouseup touchend touchcancel ".split(" ").join(e+" ");f.options.repeatRate=0,f.$allKeys.bind(d,function(){clearTimeout(c);var d=a(this),e=d.attr("data-action")||"";e in b.altKeys&&(c=setTimeout(function(){f.altKeyPopup_popup(e,d)},f.altkeypopup_options.holdTime))}).bind(g,function(){clearTimeout(c)})},f.altKeyPopup_popup=function(c,d){var e,g,h,i,j,k=b.css,l=f.$keyboard.outerWidth(),m=f.$keyboard.outerHeight();f.altKeyPopup_$overlay=a('<div class="'+k.altKeyOverlay+'" />').css({width:l,height:m}).appendTo(f.$keyboard).bind("click touchstart",function(){f.altKeyPopup_$overlay.remove()}),"bksp"!==c&&b.keyaction.bksp(f),g=a('<div class="'+k.altKeyPopup+" "+f.options.css.container+'" />'),e=b.altKeys[c].split(/\s+/),f.buildRow(g,0,e,[]),g.appendTo(f.altKeyPopup_$overlay).children().bind("mousedown touchstart",function(c){var d=a(this).attr("data-action");d in b.keyaction&&a.isFunction(b.keyaction[d])?b.keyaction[d](f,this,c):f.insertText(d),f.altKeyPopup_$overlay.remove()}).bind("mouseover mouseleave",function(b){a(this).toggleClass(f.options.css.buttonHover,"mouseover"===b.type)}),h=d.position().left-g.outerWidth()/2+d.outerWidth()/2,h+g.outerWidth()>l&&(h=l-g.outerWidth(),0>h&&g.css({width:l,height:"auto"})),i=d.position().top-d.outerHeight()-5,j=f.$keyboard.find("."+k.keySet).position().top,i+g.outerHeight()>m&&(i=m-g.outerHeight(),j>i&&g.css({height:m-j,width:"auto"})),g.css({position:"relative",top:j>i?j:i,left:0>h?0:h}),f.$el.trigger(f.altkeypopup_options.popupVisible,[f])},f.options.alwaysOpen&&f.isVisible()&&f.altkeypopup_setup(),f.$el.unbind(b.events.kbBeforeVisible+e).bind(b.events.kbBeforeVisible+e,function(){f.altkeypopup_setup()}))})}});